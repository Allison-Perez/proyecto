<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
<nav class="navbar">
  <div class="container-fluid">
    <a class="nav-link nombre" >Acanner</a>
        <div class="menu-icon" (click)="toggleMenu()">
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
        </div>
        <ul [ngClass]="{'nav': true, 'show-menu': isMenuOpen}">
            <li class="nav-item">
              <a routerLink="/vista-instructor" class="nav-link" aria-current="page">Inicio</a>
            </li>
            <li class="nav-item">
              <a routerLink="/actividad" class="nav-link">Actividades</a>
            </li>
            <li class="nav-item">
              <a routerLink="/blog" class="nav-link">Blog</a>
            </li>
            <li class="nav-item">
              <a routerLink="/asistencia" class="nav-link">Asistencias</a>
            </li>
            <div class="dropdown">
              <button class="dropdown-button" (click)="toggleProfileMenu()">
                <span class="material-symbols-outlined">person</span>
              </button>
              <div class="dropdown-content" *ngIf="mostrarMenuPerfil" >
                <li class="nav-item">
                  <a routerLink="/perfil" class="nav-link otro " aria-current="page">Ver Perfil</a>
                </li>
                <li class="nav-item">
                  <a routerLink="/estadisticas" class="nav-link otro ">Estadísticas</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link otro" (click)="logout()">Cerrar Sesión</a>
                </li>
              </div>
            </div> 
        </ul>
  </div>
</nav> 
      <div class="container">
        <h2 class="titulo">Crear Asistencia</h2>
        <form (ngSubmit)="createAsistencia(form)" #form="ngForm">
          <div class="form-group">
            <label for="nombreArchivo">Número de Ficha:</label>
            <input [(ngModel)]="newAsistencia.nombreArchivo" name="nombreArchivo" class="form-control" required>
            <div *ngIf="form.controls['nombreArchivo'].invalid && (form.controls['nombreArchivo'].dirty || form.controls['nombreArchivo'].touched)" class="text-danger">Diligenciar todos los campos</div>
          </div>
          <div class="form-group">
            <label for="archivo">Subir archivo:</label>
            <input type="file" (change)="handleFileInput($event)" name="archivo" class="form-control" required>
          </div>
          <div class="form-group">
            <label for="comentario">Comentario:</label>
            <textarea [(ngModel)]="newAsistencia.comentario" name="comentario" class="form-control" required></textarea>
          </div>
          <br>
          <button type="submit" class="btn btn-primary boton">Guardar</button>
        </form> 
      </div>
        <h2 class="subtitulo mt-5">Asistencias</h2>
        <ul class="list-group">
          <li class="list-group-item" *ngFor="let asistencia of asistenciaList">
            <ng-container *ngIf="!editingAsistencia || asistencia.id !== editingAsistencia.id; else editTemplate">
              <h4>{{ asistencia.nombreArchivo }}</h4>
              <p>{{ asistencia.comentario }}</p>
              <a (click)="descargarArchivo(asistencia.archivoUrl)" class="btn btn-primary-ver-archivo" >Ver archivo</a>
              <button (click)="editAsistencia(asistencia)" class="btn btn-primary">Editar</button>
              <button (click)="deleteAsistencia(asistencia.id_asistencia)" class="btn btn-danger">Eliminar</button>
            </ng-container>
            <ng-template #editTemplate>
              <div class="form-group">
                <input [(ngModel)]="editingAsistencia.nombreArchivo" name="nombreArchivo" class="form-control" />
              </div>
              <div class="form-group">
                <textarea [(ngModel)]="editingAsistencia.comentario" name="comentario" class="form-control"></textarea>
              </div>
              <button (click)="updateAsistencia()" class="btn btn-success">Guardar</button>
              <button (click)="cancelEdit()" class="btn btn-secondary">Cancelar</button>
            </ng-template>
          </li>
        </ul>


