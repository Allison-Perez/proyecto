<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
<nav class="navbar">
  <div class="container-fluid">
    <a class="nav-link nombre" >Acanner</a>
        <div class="menu-icon" (click)="toggleMenu()">
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
        </div>
        <ul [ngClass]="{'nav': true, 'show-menu': isMenuOpen}">
            <li class="nav-item">
              <a routerLink="/vista-instructor" class="nav-link" aria-current="page">Inicio</a>
            </li>
            <li class="nav-item">
              <a routerLink="/horario" class="nav-link">Horarios</a>
            </li>
            <li class="nav-item">
              <a routerLink="/blog" class="nav-link">Blog</a>
            </li>
            <li class="nav-item">
              <a routerLink="/asistencia" class="nav-link">Asistencias</a>
            </li>
            <div class="dropdown">
              <button class="dropdown-button" (click)="toggleProfileMenu()">
                <span class="material-symbols-outlined">person</span>
              </button>
              <div class="dropdown-content" *ngIf="mostrarMenuPerfil" >
                <li class="nav-item">
                  <a routerLink="/perfil" class="nav-link otro " aria-current="page">Ver Perfil</a>
                </li>
                <li class="nav-item">
                  <a routerLink="/estadisticas" class="nav-link otro ">Estadísticas</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link otro" (click)="logout()">Cerrar Sesión</a>
                </li>
              </div>
            </div> 
        </ul>
  </div>
</nav> 
<div class="container">
  <h2 class="subtitulo mt-5">Crear Actividad</h2>
  <form (submit)="createActivity(activityForm)" enctype="multipart/form-data" #activityForm="ngForm">
    <div class="form-group">
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" name="nombre" [(ngModel)]="newActivity.nombre" class="form-control" required>
    </div>
    <div class="form-group">
      <label for="comentario">Comentario:</label>
      <textarea id="comentario" name="comentario" [(ngModel)]="newActivity.comentario" class="form-control" required></textarea>
    </div>
    <div class="form-group">
      <label for="fechaInicio">Fecha de Inicio:</label>
      <input type="date" id="fechaInicio" name="fechaInicio" [(ngModel)]="newActivity.fechaInicio" class="form-control" required>
    </div>
    <div class="form-group">
      <label for="fechaFin">Fecha de Fin:</label>
      <input type="date" id="fechaFin" name="fechaFin" [(ngModel)]="newActivity.fechaFin" class="form-control" required>
    </div>
    <div class="form-group">
      <label for="archivo">Archivo:</label>
      <input type="file" id="archivo" name="archivo" (change)="handleFileInput($event)" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-primary">Crear Actividad</button>
  </form>

  <div *ngIf="errorMessage" class="alert alert-danger mt-3" role="alert">
    {{ errorMessage }}
  </div>

  <h2 class="subtitulo mt-5">Lista Actividades</h2>
  <ul class="list-group">
    <li class="list-group-item" *ngFor="let activity of activityList">
      <ng-container *ngIf="!editingActivity || activity.id !== editingActivity.id; else editTemplate">
        <h4>{{ activity.nombreArchivo }}</h4>
        <p>{{ activity.comentario }}</p>
        <a (click)="descargarArchivo(activity.archivoUrl, activity.nombreArchivo)" class="btn btn-primary-ver-archivo">Ver archivo</a>
        <button (click)="editActivity(activity)" class="btn btn-primary">Editar</button>
        <button (click)="deleteActivity(activity.idActividad)" class="btn btn-danger">Eliminar</button>
      </ng-container>
      <ng-template #editTemplate>
        <div class="form-group">
          <input [(ngModel)]="editingActivity.nombreArchivo" name="nombreArchivo" class="form-control" />
        </div>
        <div class="form-group">
          <textarea [(ngModel)]="editingActivity.comentario" name="comentario" class="form-control"></textarea>
        </div>
        <button (click)="updateActivity()" class="btn btn-success">Guardar</button>
        <button (click)="cancelEdit()" class="btn btn-secondary">Cancelar</button>
      </ng-template>
    </li>
  </ul>
</div>
